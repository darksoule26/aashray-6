<!DOCTYPE html>
<html>
<head>
  <title>Aashray_form</title>
  <link rel="stylesheet" href="css/form.css">
</head>
<body>
  <h1>AASHRAY</h1>
  <h1>ONE CLICK CAN CHANGE SOMEONE'S LIFE</h1>

  <form method="post" name="google-sheet" autocomplete="off" id="myForm">
    <div class="form-group">
      <label for="name">Name:</label> <input type="text" id="name" name="name" required>
      
    </div>

    <div class="form-group">
      <label for="contact">Contact Number:</label>
      <input type="tel" id="contact" name="contact" required>
    </div>

    <div class="form-group">
      <label for="address">Address:</label>
      <textarea id="address" name="address" rows="4" required></textarea>
    </div>

    <div class="form-group">
      <label for="location">Location:</label>
      <div class="location-container">
        <input type="text" id="location" name="location" required>
        <button type="button" onclick="getCurrentLocation()">Get Current Location</button>
      </div>
    </div>

    <div class="form-group">
      <label for="remark">Remark:</label>
      <textarea id="remark" name="remark" rows="4"></textarea>
    </div>

    <div class="form-group">
      <label class="declaration-label" for="declaration">
        <input type="checkbox" id="declaration" name="declaration" required>
        I declare that the given information is true and for wrong or untruthfull information i will be held guilty.
      </label>
    </div>

    <div class="form-group">
      <label for="picture">Picture:</label>
      <input type="file" id="picture" name="picture" accept="image/*" capture="camera" onchange="previewImage(event)">
    </div>

    <img id="preview" src="#" alt="Preview Image">

    <div class="form-group">
      <input type="submit" value="Submit">
    </div>
  </form>

  <script>
    function previewImage(event) {
      var reader = new FileReader();
      reader.onload = function(){
        var output = document.getElementById('preview');
        output.src = reader.result;
        output.style.display = 'block';
      };
      reader.readAsDataURL(event.target.files[0]);
    }

    function getCurrentLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
      } else {
        alert("Geolocation is not supported by this browser.");
      }
    }

    function showPosition(position) {
      var latitude = position.coords.latitude;
      var longitude = position.coords.longitude;
      var locationInput = document.getElementById("location");
      locationInput.value = "Latitude: " + latitude + ", Longitude: " + longitude;
    }
    const scriptURL = 'https://script.google.com/macros/s/AKfycbyMQIyqtMqdbEW-eIi6Oap2h9nezKVgBtyxc6MCNhYEKtjaZ7tJhdIs2bnftZeQeyWv-w/exec'
        const form = document.forms['google-sheet']
      
        form.addEventListener('submit', e => {
          e.preventDefault()
          fetch(scriptURL, { method: 'POST', body: new FormData(form)})
            .then(response => alert("Thanks for Contacting us..! We Will Contact You Soon..."))
            .catch(error => console.error('Error!', error.message))
            document.getElementById("myForm").reset();
        })

  </script>
</body>
</html>

